<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/main.css" />
    <title>Lego Collection</title>
</head>
<body>
    <div class="navbar bg-base-100">
        <div class="flex-1">
            <a class="btn btn-ghost normal-case text-xl" href="/">Lego Collection</a></div>
        <ul class="menu menu-horizontal text-sm ">
            <li><a class="<%= (page == '/lego/sets') ? 'active' : '' %>" href="/lego/sets">View Collection</a></li>
            <li><a class="<%= (page == '/about') ? 'active' : '' %>" href="/about">About</a></li>

            <!-- Conditionally Rendered Dropdown for Logged-In Users -->
            <% if (session.user) { %>
                <li>
                    <details>
                        <summary>Account: <%= session.user.userName %></summary>
                        <ul class="p-2 hover:absolute z-auto">
                            <li><a class="<%= (page == '/lego/addSet') ? 'active' : '' %>" href="/lego/addSet">Add to Collection</a></li>
                            <li><a class="<%= (page == '/userHistory') ? 'active' : '' %>" href="/userHistory">User History</a></li>
                            <li><a href="/logout">Log Out</a></li>
                        </ul>
                    </details>
                </li>
            <% } else { %>
                <!-- Dropdown for Not Logged-In Users -->
                <li>
                    <details>
                        <summary>Account</summary>
                        <ul class="p-2 hover:absolute z-auto">
                            <li><a class="<%= (page == '/login') ? 'active' : '' %>" href="/login">Login</a></li>
                            <li><a class="<%= (page == '/register') ? 'active' : '' %>" href="/register">Register</a></li>
                        </ul>
                    </details>
                </li>
            <% } %>
        </ul>
    </div>
</div>
</body>
</html>